(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{Docz:function(e,n,t){"use strict";var l=t("rePB"),o=t("q1tI"),r=t("TQLJ"),i=t("phMg"),a=t("JFC1"),u=t("vns1"),c=t("Lbeu"),s=t("i7Pf"),f=t("WyOo"),p=t("1OyB"),m=t("vuIU"),d=t("Ji7U"),h=t("md7G"),b=t("foSv"),O=t("omAR"),x=t("gtjh");function y(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,l=Object(b.a)(e);if(n){var o=Object(b.a)(this).constructor;t=Reflect.construct(l,arguments,o)}else t=l.apply(this,arguments);return Object(h.a)(this,t)}}var T={ALREADY_DOWNLOAD:"\uc774\ubbf8 \ubc1c\uae09\ubc1b\uc73c\uc2e0 \ucfe0\ud3f0\uc785\ub2c8\ub2e4.",MAX_COUNT_EXCEED:"\uc774\ubbf8 \ubc1c\uae09\ubc1b\uc73c\uc2e0 \ucfe0\ud3f0\uc785\ub2c8\ub2e4.",MAX_COUNT_EXCEED_PER_ID:"\uc774\ubbf8 \ubc1c\uae09\ubc1b\uc73c\uc2e0 \ucfe0\ud3f0\uc785\ub2c8\ub2e4."},v={PRODUCT_NO_DUP:"\uc0c1\ud488 \ud560\uc778\ucfe0\ud3f0",PRODUCT:"\uc0c1\ud488 \ud560\uc778\ucfe0\ud3f0",ORDER:"\uc8fc\ubb38 \ud560\uc778\ucfe0\ud3f0",DELIVERY:"\ubc30\uc1a1\ube44 \ucfe0\ud3f0",MANAGE_ORDER:"\uad00\ub9ac\uc790 \ud560\uc778\ucfe0\ud3f0"},E={STORE_KEEP:"\uc2a4\ud1a0\uc5b4\ucc1c",TALK_FRIEND:"\uc54c\ub9bc\ubc1b\uae30"},g={PERCENT:"% \ud560\uc778",WN:"\uc6d0 \ud560\uc778",COUNT:"\uac1c"},R=new(function(e){Object(d.a)(t,e);var n=y(t);function t(){return Object(p.a)(this,t),n.apply(this,arguments)}return Object(m.a)(t,[{key:"getCouponResultCodeMessage",value:function(e){return T[e||""]||"\ucfe0\ud3f0 \ub2e4\uc6b4\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."}},{key:"getBenefitDataForPopup",value:function(e){if(!e||"TALK_FRIEND"!==e.customerManageBenefitType&&"STORE_KEEP"!==e.customerManageBenefitType)return null;var n={};return n.couponPublicationNo=e.couponPublicationNo,n.benefitName=E[e.customerManageBenefitType]+" "+(v[e.couponKindType]||"\ud61c\ud0dd"),n.benefitValueText=x.a.Utils.numberWithCommas(e.benefitValue),n.benefitUnitText=g[e.benefitUnitType],n.limitText="",e.minOrderAmount&&e.minOrderAmount>0&&(n.limitText+=x.a.Utils.numberWithCommas(e.minOrderAmount)+"\uc6d0 \uc774\uc0c1 \uad6c\ub9e4 \uc2dc "),e.maxDiscountAmount&&e.maxDiscountAmount>0&&(n.limitText+="\ucd5c\ub300 "+x.a.Utils.numberWithCommas(e.maxDiscountAmount)+"\uc6d0 \ud560\uc778"),e.validityDay?n.expireText="\ubc1c\uae09 \ud6c4 "+e.validityDay+"\uc77c\uac04 \uc720\ud6a8":e.validPeriodEndDate&&(n.expireText=DateFormat.format.date(new Date(e.validPeriodEndDate),"yyyy. M. d.",9)+"\uae4c\uc9c0 \uc720\ud6a8"),n}},{key:"getNewsBenefit",value:function(e){return this.getBenefit(e,"TALK_FRIEND")}},{key:"getBenefit",value:function(e,n){if(!$.isArray(e)||!e.length)return null;for(var t=0;t<e.length;t++){var l=e[t];if(l&&l.customerManageBenefitType===n)return l}return null}},{key:"benefitRemains",value:function(e,n){return!(!n||!n.length||e||!this.getBenefit(n,"TALK_FRIEND"))}}]),t}(O.b)),D=t("VyRU"),_=t("Idjl"),N=t("nKUr");function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){Object(l.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.a=function(e){var n=e.children,l=Object(a.c)(),p=Object(a.d)(_.b).isMobile,m=Object(a.d)(D.g),d=t(p?"HWNp":"VdlH"),h=Object(o.useState)(!1),b=h[0],O=h[1],x=Object(o.useState)({}),y=x[0],T=x[1],v=Object(o.useState)([]),E=v[0],g=v[1],P=Object(o.useRef)({}),j=Object(o.useRef)(!1),C=Object(o.useRef)(u.a.PROFILE);Object(o.useEffect)((function(){f.b.eventChatOpenStoreCouponPopup.subscribe((function(e){var n=e.channelGetElements,t=e.registPath;n&&n.length>0&&(C.current=t,g(n))}))}),[]),Object(o.useEffect)((function(){b||(C.current=u.a.PROFILE,g([]))}),[b]),Object(o.useEffect)((function(){E&&E.length>0&&(A(),O(!0))}),[E]);var A=function(){var e,n={title:r.a.NEWS_ADD_CONTENT(m.name),confirmBtnText:r.a.ADD_FRIEND,couponListHtml:""};E.forEach((function(t){var l=t.smartstoreNews&&t.smartstoreNews.benefit?t.smartstoreNews.benefit:{};R.benefitRemains(t.friendYn,l)&&(e||(e=R.getNewsBenefit(l))&&(P.current=w(w({},P.current),{},{newsBenefit:e,newsBenefitTempalteData:R.getBenefitDataForPopup(e)}),n.couponListHtml+=d(P.current.newsBenefitTempalteData)))})),T(w({},n))},S=function(e){T({subTitle:e})};return Object(N.jsx)(N.Fragment,{children:n({visible:b,setVisible:O,onClickSuccess:function(e){if(e.preventDefault(),!j.current){j.current=!0;var n=P.current.newsBenefit&&P.current.newsBenefit.couponPublicationNo||null;l(Object(c.a)({channelParams:E.map((function(e,t){var l={};return 0===t&&n&&(l.newsCouponPublicationNo=n),{channelId:e.channelId,channelType:e.channelType,smartstoreNews:l}})),registPath:C.current})).then(s.d).then((function(e){var n=e.data;n.some((function(e){return!e.errorYn}))?function(e){var n={couponListHtml:""},t=!1,o=e.reduce((function(e,l){var o=l.smartstoreNews;if(!o)return{newsSuccess:!1};var r=o.news,i=o.newsCoupon;if(r&&r.isSuccess){var a=!1;return!t&&P.current.newsBenefit&&(t=!0,i&&i.code&&"SUCCESS"===i.code?a=!0:P.current.newsBenefitTempalteData.errorText=R.getCouponResultCodeMessage(i?i.code:""),n.couponListHtml+=d(P.current.newsBenefitTempalteData)),{newsSuccess:e.newsSuccess||!0,couponSuccess:e.couponSuccess||a}}return{newsSuccess:!1}}),{}),a=o.newsSuccess,u=o.couponSuccess;a?T(w(w({},n),{},{title:r.a.NEWS_ADD_DONE_CONTENT,subTitle:u?r.a.NEWS_ADD_COUPON_DONE_CONTENT:""})):l(Object(i.e)({content:r.a.FRIEND_ERROR}))}(n):n.some((function(e){return"ALREADY_FRIEND"===e.errorCode}))?S(r.a.ALREADY_FRIEND("\uc2a4\ud1a0\uc5b4")):n.some((function(e){return"SMARTSTORE_ERROR"===e.errorCode}))?S(r.a.SMARTSTORE_ERROR):S(r.a.FRIEND_ERROR)}),(function(){l(Object(i.e)({content:r.a.FRIEND_ERROR}))})).finally((function(){j.current=!1}))}},renderData:y})})}},HWNp:function(e,n,t){var l=t("3O+N");e.exports=(l.default||l).template({1:function(e,n,t,l,o){return"disabled"},3:function(e,n,t,l,o){var r,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <li>"+e.escapeExpression("function"===typeof(r=null!=(r=i(t,"errorText")||(null!=n?i(n,"errorText"):n))?r:e.hooks.helperMissing)?r.call(null!=n?n:e.nullContext||{},{name:"errorText",hash:{},data:o,loc:{start:{line:16,column:12},end:{line:16,column:25}}}):r)+"</li>\n"},5:function(e,n,t,l,o){var r,i=null!=n?n:e.nullContext||{},a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        "+(null!=(r=a(t,"if").call(i,null!=n?a(n,"limitText"):n,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:8},end:{line:18,column:56}}}))?r:"")+"\n        "+(null!=(r=a(t,"if").call(i,null!=n?a(n,"expireText"):n,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:8},end:{line:19,column:58}}}))?r:"")+"\n"},6:function(e,n,t,l,o){var r,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<li>- "+e.escapeExpression("function"===typeof(r=null!=(r=i(t,"limitText")||(null!=n?i(n,"limitText"):n))?r:e.hooks.helperMissing)?r.call(null!=n?n:e.nullContext||{},{name:"limitText",hash:{},data:o,loc:{start:{line:18,column:31},end:{line:18,column:44}}}):r)+"</li>"},8:function(e,n,t,l,o){var r,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<li>- "+e.escapeExpression("function"===typeof(r=null!=(r=i(t,"expireText")||(null!=n?i(n,"expireText"):n))?r:e.hooks.helperMissing)?r.call(null!=n?n:e.nullContext||{},{name:"expireText",hash:{},data:o,loc:{start:{line:19,column:32},end:{line:19,column:46}}}):r)+"</li>"},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,o){var r,i,a=null!=n?n:e.nullContext||{},u=e.hooks.helperMissing,c=e.escapeExpression,s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li>\n    \x3c!-- \ucfe0\ud3f0 \uc601\uc5ed --\x3e\n    <div class="item_coupon_wrap '+(null!=(r=s(t,"if").call(a,null!=n?s(n,"errorText"):n,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:33},end:{line:3,column:65}}}))?r:"")+'">\n        <div class="info_coupon">\n            <strong class="blind">\ucfe0\ud3f0\uba85</strong>\n            <p class="name_coupon">'+c("function"===typeof(i=null!=(i=s(t,"benefitName")||(null!=n?s(n,"benefitName"):n))?i:u)?i.call(a,{name:"benefitName",hash:{},data:o,loc:{start:{line:6,column:35},end:{line:6,column:50}}}):i)+'</p>\n            <strong class="blind">\ud560\uc778 \ud61c\ud0dd</strong>\n            <p class="desc_info_coupon"><b>'+c("function"===typeof(i=null!=(i=s(t,"benefitValueText")||(null!=n?s(n,"benefitValueText"):n))?i:u)?i.call(a,{name:"benefitValueText",hash:{},data:o,loc:{start:{line:8,column:43},end:{line:8,column:63}}}):i)+"</b><span>"+c("function"===typeof(i=null!=(i=s(t,"benefitUnitText")||(null!=n?s(n,"benefitUnitText"):n))?i:u)?i.call(a,{name:"benefitUnitText",hash:{},data:o,loc:{start:{line:8,column:73},end:{line:8,column:92}}}):i)+'</span></p>\n        </div>\n        \x3c!-- \ucfe0\ud3f0 \uafb8\ubc08 \uc774\ubbf8\uc9c0 --\x3e\n        <div class="img_coupon" aria-hidden="true"></div>\n    </div>\n    \x3c!-- \uc548\ub0b4\uc0ac\ud56d --\x3e\n    <ul class="list_coupon_desc">\n'+(null!=(r=s(t,"if").call(a,null!=n?s(n,"errorText"):n,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:15,column:8},end:{line:20,column:15}}}))?r:"")+"    </ul>\n</li>"},useData:!0})},VdlH:function(e,n,t){var l=t("3O+N");e.exports=(l.default||l).template({1:function(e,n,t,l,o){return"disabled"},3:function(e,n,t,l,o){var r,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"            <li>"+e.escapeExpression("function"===typeof(r=null!=(r=i(t,"errorText")||(null!=n?i(n,"errorText"):n))?r:e.hooks.helperMissing)?r.call(null!=n?n:e.nullContext||{},{name:"errorText",hash:{},data:o,loc:{start:{line:16,column:16},end:{line:16,column:29}}}):r)+"</li>\n"},5:function(e,n,t,l,o){var r,i=null!=n?n:e.nullContext||{},a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"            "+(null!=(r=a(t,"if").call(i,null!=n?a(n,"limitText"):n,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:18,column:12},end:{line:18,column:60}}}))?r:"")+"\n            "+(null!=(r=a(t,"if").call(i,null!=n?a(n,"expireText"):n,{name:"if",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:19,column:12},end:{line:19,column:62}}}))?r:"")+"\n"},6:function(e,n,t,l,o){var r,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<li>- "+e.escapeExpression("function"===typeof(r=null!=(r=i(t,"limitText")||(null!=n?i(n,"limitText"):n))?r:e.hooks.helperMissing)?r.call(null!=n?n:e.nullContext||{},{name:"limitText",hash:{},data:o,loc:{start:{line:18,column:35},end:{line:18,column:48}}}):r)+"</li>"},8:function(e,n,t,l,o){var r,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<li>- "+e.escapeExpression("function"===typeof(r=null!=(r=i(t,"expireText")||(null!=n?i(n,"expireText"):n))?r:e.hooks.helperMissing)?r.call(null!=n?n:e.nullContext||{},{name:"expireText",hash:{},data:o,loc:{start:{line:19,column:36},end:{line:19,column:50}}}):r)+"</li>"},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,o){var r,i,a=null!=n?n:e.nullContext||{},u=e.hooks.helperMissing,c=e.escapeExpression,s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<li>\n    \x3c!-- \ucfe0\ud3f0 \uc601\uc5ed --\x3e\n    <div class="item_coupon_wrap '+(null!=(r=s(t,"if").call(a,null!=n?s(n,"errorText"):n,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:3,column:33},end:{line:3,column:65}}}))?r:"")+'">\n        <div class="info_coupon">\n            <strong class="blind">\ucfe0\ud3f0\uba85</strong>\n            <p class="name_coupon">'+c("function"===typeof(i=null!=(i=s(t,"benefitName")||(null!=n?s(n,"benefitName"):n))?i:u)?i.call(a,{name:"benefitName",hash:{},data:o,loc:{start:{line:6,column:35},end:{line:6,column:50}}}):i)+'</p>\n            <strong class="blind">\ud560\uc778 \ud61c\ud0dd</strong>\n            <p class="desc_info_coupon"><b>'+c("function"===typeof(i=null!=(i=s(t,"benefitValueText")||(null!=n?s(n,"benefitValueText"):n))?i:u)?i.call(a,{name:"benefitValueText",hash:{},data:o,loc:{start:{line:8,column:43},end:{line:8,column:63}}}):i)+"</b><span>"+c("function"===typeof(i=null!=(i=s(t,"benefitUnitText")||(null!=n?s(n,"benefitUnitText"):n))?i:u)?i.call(a,{name:"benefitUnitText",hash:{},data:o,loc:{start:{line:8,column:73},end:{line:8,column:92}}}):i)+'</span></p>\n        </div>\n        \x3c!-- \ucfe0\ud3f0 \uafb8\ubc08 \uc774\ubbf8\uc9c0 --\x3e\n        <div class="img_coupon" aria-hidden="true"></div>\n    </div>\n    \x3c!-- \uc548\ub0b4\uc0ac\ud56d --\x3e\n    <ul class="list_coupon_desc">\n'+(null!=(r=s(t,"if").call(a,null!=n?s(n,"errorText"):n,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o,loc:{start:{line:15,column:8},end:{line:20,column:15}}}))?r:"")+"    </ul>\n</li>"},useData:!0})}}]);