(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{b7v2:function(e,n,t){"use strict";t.d(n,"c",(function(){return s})),t.d(n,"b",(function(){return O})),t.d(n,"a",(function(){return b})),t.d(n,"d",(function(){return f}));var r=t("rePB"),c=t("G4qV");function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var o,i,s=Object(c.a)((function(e){return e.newsAndBenefit}),(function(e){return e.partnerChannels})),O=Object(c.a)(s,(function(e){return e.reduce((function(e,n){return u(u({},e),{},Object(r.a)({},n.channelId,n))}),{})})),b=Object(c.a)((function(e){return e.newsAndBenefit}),(function(e){return e.newsAndBenefits}));!function(e){e[e.SHOPPINGSELLER=0]="SHOPPINGSELLER",e[e.PLACE=1]="PLACE",e[e.PREMIUMCONTENTS=2]="PREMIUMCONTENTS",e[e.NAVERLOGIN=3]="NAVERLOGIN",e[e.DEFAULT=4]="DEFAULT",e[e.TALK=5]="TALK"}(o||(o={})),function(e){e[e.STOREFARM=0]="STOREFARM",e[e.WINDOW=1]="WINDOW",e[e.DEFAULT=2]="DEFAULT"}(i||(i={}));var f=Object(c.a)((function(e){return e.newsAndBenefit}),O,(function(e,n){var t=e.newsAndBenefits;return JSON.parse(JSON.stringify(t)).sort((function(e,t){if(!n[e.channelId]||!n[t.channelId])return!0;var r=e.friendYn,c=t.friendYn;if(r!==c)return r?-1:1;var a=e.createdAt,u=t.createdAt;if(r&&c&&a&&u)return new Date(a)>new Date(u)?-1:1;var s=e.channelType?Number(o[e.channelType.toString()]):o.DEFAULT,O=t.channelType?Number(o[t.channelType.toString()]):o.DEFAULT;if(s-O!==0)return s-O;var b=n[e.channelId].attributes.channelServiceType?Number(i[n[e.channelId].attributes.channelServiceType.toString()]):i.DEFAULT,f=n[t.channelId].attributes.channelServiceType?Number(i[n[t.channelId].attributes.channelServiceType.toString()]):i.DEFAULT;return b-f!==0?b-f:n[e.channelId].name>n[t.channelId].name?1:-1})).map((function(e){return u(u({},e),{},{url:n[e.channelId].url,imageUrl:n[e.channelId].imageUrl,profileName:n[e.channelId].profileName,attributes:n[e.channelId].attributes})}))}))},bXTb:function(e,n,t){"use strict";t.d(n,"a",(function(){return I}));var r=t("o0o1"),c=t.n(r),a=t("rePB"),u=t("HaE+"),o=t("q1tI"),i=t("vns1"),s=t("TQLJ"),O=t("Lbeu"),b=t("i7Pf"),f=t("Y4NF"),E=t("6lxN"),l=function(e){switch(e){case i.b.SHOPPINGSELLER:return"\uc2a4\ud1a0\uc5b4";case i.b.PLACE:return"\ud50c\ub808\uc774\uc2a4";case i.b.PREMIUMCONTENTS:return"\ud504\ub9ac\ubbf8\uc5c4\ucf58\ud150\uce20";case i.b.TALK:default:return"\ud1a1\ud1a1"}},h=t("phMg"),p=t("JFC1"),N=t("GvN4"),d=t("b7v2"),R=t("Tex7"),T=t("VyRU"),L=t("MRHx"),j=t("Idjl"),A=t("WyOo"),D=t("nKUr");function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){Object(a.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function I(e){return function(n){var t=Object(p.c)(),r=Object(p.d)(j.b),a=r.isMobile,_=r.partnerId,I=r.params,S=Object(p.d)(T.b),v=Object(p.d)(T.g),y=Object(p.d)(d.b);Object(o.useLayoutEffect)((function(){var e=A.b.eventNewsClear.subscribe((function(){t(Object(O.g)([]))})),n=A.b.eventNewsAdd.subscribe((function(e){var n=e.channelGetElements;m(n)})),r=A.b.eventNewsDelete.subscribe((function(e){var n=e.channelKeys;P(n)})),c=A.b.eventNewsBlock.subscribe((function(e){var n=e.channelKeys;w(n)}));return function(){e.unsubscribe(),n.unsubscribe(),r.unsubscribe(),c.unsubscribe()}}),[y]),Object(o.useEffect)((function(){var e=[],n=v.isPossibleFriend||v.isPossibleUnfriend;if(n&&e.push({channelId:_,type:i.b.TALK,name:v.name,profileName:v.name,attributes:{}}),0!==v.partnerChannels.length){var r=Object(R.e)(v.partnerChannels);r.length>0&&!n&&S.friend&&e.push({channelId:_,type:i.b.TALK,name:v.name,profileName:v.name,attributes:{}}),e=e.concat(r)}t(Object(O.h)(e)),t(Object(O.g)([]))}),[v]),Object(o.useEffect)((function(){if(I[L.h.reqChannelId]){var e="0"===I[L.h.reqChannelId]?_:I[L.h.reqChannelId],n=Object.values(y).filter((function(n){return e===n.channelId||e===n.id}));if(0===n.length&&v.partnerChannels.filter((function(n){return e===n.id})).length>0&&(n=[{type:i.b.TALK,channelId:_}]),n.length>0){var t={channelType:n[0].type,channelId:n[0].channelId},r=i.a.PROFILE;switch(I[L.h.frm]){case"frndbt":r=i.a.FRIEND_BUTTON;break;case"frndst":r=i.a.FRIEND_SCRIPT}m([t],r)}}}),[y]);var m=function(){var e=Object(u.a)(c.a.mark((function e(n,r){var o,f,E;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(O.f)({channelKeys:n,update:!1})).then(b.d);case 2:if((o=e.sent).some((function(e){return!e.friendYn}))){e.next=6;break}return t(Object(h.e)({content:s.a.ALREADY_FRIEND(l(null===(f=o[0])||void 0===f?void 0:f.channelType))})),e.abrupt("return");case 6:o[0].channelType===i.b.SHOPPINGSELLER?A.b.eventChatOpenStoreCouponPopup.next({channelGetElements:o,registPath:r}):(E=g(o),t(Object(h.f)(C(C({},a?{title:s.a.NEWS_ADD_CONTENT(E)}:{content:s.a.NEWS_ADD_CONTENT(E)}),{},{defaultBtn:{text:s.a.CLOSE},successBtn:{text:s.a.ADD_FRIEND}}))).then(b.d).then(function(){var e=Object(u.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n===N.b.RESOLVED&&t(Object(O.a)({channelParams:o,registPath:r})).then(b.d).then((function(e){var n=e.data;n.some((function(e){return!e.errorYn}))?t(Object(h.e)({title:s.a.NEWS_ADD_DONE_CONTENT,defaultBtn:{text:s.a.CLOSE}})):n.some((function(e){return"ALREADY_FRIEND"===e.errorCode}))?t(Object(h.e)({content:s.a.ALREADY_FRIEND(E)})):n.some((function(e){return"SMARTSTORE_ERROR"===e.errorCode}))?t(Object(h.e)({content:s.a.SMARTSTORE_ERROR})):t(Object(h.e)({content:s.a.FRIEND_ERROR}))}),(function(){t(Object(h.e)({content:s.a.FRIEND_ERROR}))}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),P=function(e){if(e&&0!==e.length){var n=g(e);t(Object(h.f)(1===e.length?C(C({},a?{title:s.a.NEWS_CANCEL_TITLE(n)}:{content:s.a.NEWS_CANCEL_TITLE(n)}),{},{defaultBtn:{text:s.a.NO},successBtn:{text:s.a.CANCEL_FRIEND}}):{title:s.a.NEWS_CANCEL_TITLE_MULTIPLE,content:s.a.NEWS_CANCEL_CONTENT_MULTIPLE(v.name,e.length,l(e[0].channelType)),hasCloseBtn:!0,defaultBtn:{text:s.a.STORE_NEWS_CANCEL_DEFAULT_MULTIPLE},successBtn:{text:s.a.ALL_CANCEL}})).then(b.d).then(function(){var n=Object(u.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r===N.b.RESOLVED?t(Object(O.d)({channelKeys:e})).then(b.d).then((function(n){var r=n.data;r.some((function(e){return!e.errorYn}))?t(Object(h.e)({title:s.a.NEWS_CANCELED_TITLE,content:s.a.NEWS_CANCELED_CONTENT(Object(f.f)("YYYY\ub144 MM\uc6d4 DD\uc77c"),v.name)})):r.some((function(e){return"ALREADY_NOT_FRIEND"===e.errorCode}))?t(Object(h.e)({content:s.a.ALREADY_NOT_FRIEND(l(e[0].channelType))})):r.some((function(e){return"SMARTSTORE_ERROR"===e.errorCode}))?t(Object(h.e)({content:s.a.SMARTSTORE_ERROR})):t(Object(h.e)({content:s.a.FRIEND_ERROR}))}),(function(){t(Object(h.e)({content:s.a.FRIEND_ERROR}))})):r===N.b.REJECTED&&e.length>1&&t(Object(E.c)(!0));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},w=function(){var e=Object(u.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(O.f)({channelKeys:n,update:!1})).then(b.d);case 2:if((r=e.sent).some((function(e){return!e.blockYn}))){e.next=6;break}return t(Object(h.e)({content:s.a.ALREADY_BLOCKED(l(r[0].channelType))})),e.abrupt("return");case 6:t(Object(h.f)({title:s.a.NEWS_BLOCK_TITLE,content:1===n.length?s.a.NEWS_BLOCK_CONTENT:s.a.NEWS_BLOCK_CONTENT_B(v.name,n.length,l(n[0].channelType)),defaultBtn:{text:s.a.CLOSE},successBtn:{text:s.a.NEWS_BLOCK}})).then(b.d).then(function(){var e=Object(u.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r===N.b.RESOLVED&&t(Object(O.b)({channelKeys:n})).then(b.d).then((function(e){var r=e.data;r.some((function(e){return!e.errorYn}))?t(Object(h.e)({content:s.a.NEW_BLOCK_COMPLETE_CONTENT(Object(f.f)("MM\uc6d4 DD\uc77c a h\uc2dc")),defaultBtn:{text:s.a.CLOSE}})):r.some((function(e){return"ALREADY_BLOCKED"===e.errorCode}))?t(Object(h.e)({content:s.a.ALREADY_BLOCKED(l(n[0].channelType))})):r.some((function(e){return"SMARTSTORE_ERROR"===e.errorCode}))?t(Object(h.e)({content:s.a.SMARTSTORE_ERROR})):t(Object(h.e)({content:s.a.FRIEND_ERROR}))}),(function(){t(Object(h.e)({content:s.a.FRIEND_ERROR}))}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(e){var n;switch(e[0].channelType){case i.b.TALK:n=v.name;break;case i.b.NAVERLOGIN:n=y[e[0].channelId].profileName;break;default:n=l(e[0].channelType)}return n};return Object(D.jsx)(e,C({},n))}}}}]);